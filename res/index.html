<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Sync-Player</title>
  <link rel="icon" href="data:,">
  <!-- Pixel Font for Chat -->
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/client.css">
  <script type="importmap">
    {
      "imports": {
        "rvfc-polyfill": "/rvfc-polyfill/index.js",
        "abslink": "/abslink/src/abslink.js",
        "abslink/w3c": "/abslink/adapters/w3c.js"
      }
    }
  </script>

</head>

<body>
  <div id="media-placeholder">
    <div class="icon">ğŸµ</div>
    <div class="text">Audio Playing</div>
  </div>
  <div id="subtitle-overlay"></div>
  <video id="video" autoplay preload="auto"></video>
  <video id="preload-video" preload="auto"></video>
  <!-- Hidden audio element for syncing extracted external audio tracks (BSL-SÂ² / Server) -->
  <audio id="external-audio" preload="auto" crossorigin="anonymous" style="display: none;"></audio>
  <img id="image-display" alt="">

  <div id="youtube-container">
    <div id="youtube-player"></div>
    <div id="youtube-click-overlay"></div>
  </div>

  <!-- External Player Containers -->
  <div id="vimeo-container" class="player-container"></div>
  <div id="dailymotion-container" class="player-container"></div>
  <div id="twitch-container" class="player-container"></div>
  <div id="soundcloud-container" class="player-container"></div>
  <div id="iframe-container" class="player-container">
    <iframe id="generic-iframe" allow="autoplay; fullscreen"></iframe>
  </div>

  <div id="waiting-message">Waiting for admin to launch playlist...</div>
  <div id="status"></div>
  <div id="current-track-info"></div>

  <!-- Chat Widget -->
  <div id="chat-widget">
    <div id="chat-header">
      <button id="chat-toggle-btn">></button>
    </div>
    <div id="chat-messages"></div>
    <div id="chat-input-area">
      <span class="chat-label">CHAT:</span>
      <input type="text" id="chat-input" placeholder="Enter your name..." maxlength="500">
      <button id="chat-send">â¤</button>
    </div>
  </div>

  <!-- BSL-SÂ² Folder Selection (hidden input + overlay) -->
  <input type="file" id="bsl-folder-input" webkitdirectory directory multiple hidden>
  <div id="bsl-overlay">
    <div class="bsl-prompt">
      <h2>ğŸ“ BSL-SÂ² Local Sync</h2>
      <p>Admin is checking for local video files. Select your videos folder to enable local playback (saves bandwidth).
      </p>
      <div class="bsl-buttons">
        <button class="bsl-btn" id="bsl-select-btn">Select Videos Folder</button>
        <button class="bsl-btn" id="bsl-use-previous-btn"
          style="display: none; background: linear-gradient(135deg, #2196F3, #1976D2);">Use Previous Folder</button>
        <button class="bsl-btn-skip" id="bsl-skip-btn">Skip</button>
      </div>
      <div id="bsl-result" class="bsl-result" style="display:none;"></div>
    </div>
  </div>

  <!-- Mobile Landscape Prompt -->
  <div id="mobile-landscape-overlay">
    <div class="mobile-prompt">
      <div class="mobile-prompt-icon">ğŸ“±</div>
      <h2>Better Viewing Experience</h2>
      <p>For the best experience, we recommend fullscreen mode with landscape orientation.</p>
      <button class="mobile-prompt-btn" id="mobile-fullscreen-btn">ğŸ–¥ï¸ Go Fullscreen</button>
      <button class="mobile-prompt-btn secondary" id="mobile-skip-btn">Maybe Later</button>
    </div>
  </div>

  <!-- External Player SDKs -->
  <script src="https://player.vimeo.com/api/player.js"></script>
  <script src="https://player.twitch.tv/js/embed/v1.js"></script>
  <script src="https://api.dmcdn.net/all.js"></script>
  <script src="https://w.soundcloud.com/player/api.js"></script>

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/subtitles.js"></script>
  <script src="/js/client.js"></script>
</body>

</html>