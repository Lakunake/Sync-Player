<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Sync-Player Admin Panel</title>
  <link rel="icon" href="data:,">
  <link rel="stylesheet" href="/css/admin.css">
</head>

<body>
  <!-- Auth Screen - Shown while verification is in progress -->
  <div id="auth-screen">
    <div class="auth-content" id="auth-content">
      <div class="auth-spinner"></div>
      <p>Verifying admin access...</p>
    </div>
  </div>

  <!-- Admin UI - Hidden until authenticated -->
  <div id="admin-ui">
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-logo">S</div>

      <!-- Sliding active indicator -->
      <div class="nav-indicator" id="nav-indicator"></div>

      <div class="nav-item active" data-view="dashboard" onclick="switchView('dashboard')">
        üìä
        <span class="nav-tooltip">Dashboard</span>
      </div>

      <div class="nav-item" data-view="media" onclick="switchView('media')">
        üìÅ
        <span class="nav-tooltip">Media & Playlist</span>
      </div>

      <div class="nav-item" data-view="remote" onclick="switchView('remote')">
        üéÆ
        <span class="nav-tooltip">Remote Control</span>
      </div>

      <div class="nav-item" data-view="ffmpeg" onclick="switchView('ffmpeg')">
        üéûÔ∏è
        <span class="nav-tooltip">FFmpeg Tools</span>
      </div>

      <!-- Quick Controls - Bottom -->
      <div class="quick-controls-bottom">
        <button class="quick-btn" onclick="playVideo()" title="Play">‚ñ∂</button>
        <button class="quick-btn" onclick="pauseVideo()" title="Pause">‚è∏</button>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="header glass">
        <h1>Sync-<span>Player</span> Admin</h1>
        <div class="status-group">
          <div id="hevc-warning" class="hevc-warning" style="font-size: 13px;">
            <strong>‚ö†Ô∏è HEVC Codec Warning:</strong>&nbsp;MKV files often use HEVC (H.265) codecs which may require HEVC
            extensions for browser playback. Consider using&nbsp;<a
              href="https://github.com/Lakunake/Minecraft-WebDisplays-Sync-Player/issues/35" target="_blank"
              style="color: #2196F3;">BSL-S¬≤ (Local Sync)</a>!
          </div>
          <div id="vpn-warning" class="vpn-warning" style="font-size: 13px;">
            <strong>‚ö†Ô∏è VPN/Proxy Detected:</strong>&nbsp;<span id="vpn-warning-list"></span> - May cause connection
            issues
            for clients.
          </div>
          <div class="connection-status glass">
            <div class="status-dot" id="connection-dot"></div>
            <span id="connection-text">Connecting...</span>
          </div>
        </div>
      </header>

      <!-- Dashboard View -->
      <div id="dashboard-view" class="view active">
        <div class="dashboard-grid">
          <div class="stat-card glass" style="cursor: pointer;" onclick="openClientsModal()">
            <div class="stat-icon blue">üë•</div>
            <div class="stat-info">
              <h3 id="client-count">0</h3>
              <p>Connected Clients</p>
            </div>
          </div>

          <div class="stat-card glass">
            <div class="stat-icon purple">üé¨</div>
            <div class="stat-info">
              <h3 id="playlist-count">0</h3>
              <p>Videos in Playlist</p>
            </div>
          </div>

          <div class="stat-card glass">
            <div class="stat-icon cyan">‚è±Ô∏è</div>
            <div class="stat-info">
              <h3 id="playback-status">Idle</h3>
              <p>Playback Status</p>
            </div>
          </div>
        </div>

        <div class="dashboard-main">
          <div class="panel glass-strong" style="flex: 1;">
            <div class="panel-header">
              <h2>Quick Actions</h2>
            </div>
            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
              <button class="btn btn-primary" onclick="switchView('media')"
                style="padding: 18px 30px; font-size: 16px;">
                üìÅ Manage Playlist
              </button>
              <button class="btn btn-secondary" onclick="switchView('remote')"
                style="padding: 18px 30px; font-size: 16px;">
                üéÆ Remote Control
              </button>
              <button class="btn btn-secondary" id="dashboard-bsl-btn" style="padding: 18px 30px; font-size: 16px;">
                üîÑ BSL-S¬≤ Check
              </button>
              <button class="btn btn-secondary" onclick="window.open('/', '_blank')"
                style="padding: 18px 30px; font-size: 16px;">
                üì∫ Open Client View
              </button>
            </div>

            <div class="status-message" id="dashboard-status"></div>
          </div>

          <!-- Logs Panel -->
          <div class="panel glass-strong" style="min-width: 320px; flex: 1;">
            <div class="panel-header">
              <h2>üìã Logs</h2>
              <button class="btn btn-sm btn-secondary" onclick="clearLogs()">Clear</button>
            </div>
            <div id="logs-container"
              style="max-height: 570px; overflow-y: auto; display: flex; flex-direction: column; gap: 4px; font-size: 12px; font-family: monospace; padding-bottom: 10px;">
              <div class="log-entry" style="color: #888; opacity: 1;">Waiting for events...</div>
            </div>
          </div>

          <div class="panel glass-strong" style="min-width: 280px;">
            <div class="panel-header">
              <h2>‚öôÔ∏è Config</h2>
            </div>
            <div id="config-list"
              style="display: flex; flex-direction: column; gap: 8px; font-size: 13px; max-height: 400px; overflow-y: auto;">
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Port</span>
                <span id="cfg-port">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Skip Seconds</span>
                <span id="cfg-skip">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Volume Step</span>
                <span id="cfg-volume">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Max Volume</span>
                <span id="cfg-max-volume">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Video Autoplay</span>
                <span id="cfg-autoplay">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Join Mode</span>
                <span id="cfg-join-mode">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">HTTPS</span>
                <span id="cfg-https">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Chat</span>
                <span id="cfg-chat">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Server Mode</span>
                <span id="cfg-server-mode">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Client Controls</span>
                <span id="cfg-client-controls">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">BSL-S¬≤ Mode</span>
                <span id="cfg-bsl-mode">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">BSL-S¬≤ Adv Match</span>
                <span id="cfg-bsl-adv">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">BSL-S¬≤ Threshold</span>
                <span id="cfg-bsl-threshold">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Admin Lock</span>
                <span id="cfg-admin-lock">-</span>
              </div>
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(255,255,255,0.03); border-radius: 6px;">
                <span style="color: #888;">Subtitle Renderer</span>
                <span id="cfg-subtitle-renderer">-</span>
              </div>
            </div>

            <!-- Server Mode Room Controls (hidden by default) -->
            <div id="server-mode-controls"
              style="display: none; margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
              <div
                style="display: flex; justify-content: space-between; padding: 8px; background: rgba(33,150,243,0.1); border-radius: 6px; margin-bottom: 10px;">
                <span style="color: #2196F3;">Room Code</span>
                <span id="room-code-display" style="font-family: monospace; font-weight: bold; color: #2196F3;">-</span>
              </div>
              <button class="btn btn-danger" onclick="deleteCurrentRoom()" style="width: 100%;">
                üóëÔ∏è Delete Room
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Media & Playlist View -->
      <div id="media-view" class="view">


        <div class="media-playlist-layout">
          <!-- Available Files -->
          <div class="panel glass-strong">
            <div class="panel-header">
              <h2>üìÇ Available Files</h2>
              <button class="btn btn-sm btn-secondary" id="external-btn" onclick="openExternalModal()">üåê
                External</button>
            </div>
            <div class="file-list" id="file-browser">
              <div class="empty-message">Loading files...</div>
            </div>
          </div>

          <!-- Playlist -->
          <div class="panel glass-strong">
            <div class="panel-header">
              <h2>üìã Playlist</h2>
              <button class="btn btn-sm btn-secondary" id="bsl-check-btn">üîç BSL-S¬≤</button>
            </div>
            <div class="file-list" id="playlist-container">
              <div class="empty-message">No files in playlist yet</div>
            </div>
          </div>
        </div>

        <div class="panel glass" style="padding: 15px;">
          <div style="display: flex; align-items: center; gap: 20px;">
            <label style="font-size: 14px;">Main Video Start Time (seconds):</label>
            <input type="number" id="start-time" min="0" value="0"
              style="width: 100px; padding: 8px 12px; border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; background: rgba(255,255,255,0.05); color: #e0e0e0;">
          </div>
        </div>

        <div class="action-bar">
          <button class="btn btn-primary" id="launch-btn" style="padding: 15px 40px; font-size: 16px;">
            üöÄ Launch Playlist
          </button>
        </div>
      </div>

      <!-- Remote Control View -->
      <div id="remote-view" class="view">
        <div class="remote-layout">
          <!-- Left: Playlist Sidebar -->
          <div class="panel glass-strong remote-playlist-panel">
            <div class="panel-header">
              <h2>üìã Playlist</h2>
            </div>
            <div class="file-list remote-playlist" id="remote-playlist-list">
              <div class="empty-message">No playlist active</div>
            </div>
          </div>

          <!-- Center: Large Thumbnail -->
          <div class="panel glass-strong remote-thumbnail-panel">
            <div class="video-thumbnail" style="flex: 1; margin-bottom: 0;">
              <span class="video-thumbnail-icon">üé¨</span>
              <div class="video-info">
                <h3 id="current-video-name">No video playing</h3>
                <p id="current-video-status">Waiting for playlist...</p>
              </div>
            </div>
          </div>

          <!-- Right: Control Buttons -->
          <div class="panel glass-strong remote-controls-panel" style="display: flex; flex-direction: column;">
            <div class="panel-header" style="margin-bottom: 10px;">
              <h2>üéÆ Controls</h2>
            </div>

            <button class="control-btn play" id="play-btn" style="width: 100%;">‚ñ∂ Play</button>
            <button class="control-btn pause" id="pause-btn" style="width: 100%;">‚è∏ Pause</button>

            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
              <button class="control-btn skip" id="skip-back-btn">‚Ü© <span id="skip-back-text">5s</span></button>
              <button class="control-btn skip" id="skip-media-btn" title="Skip to next/previous media">‚è≠ Skip</button>
              <button class="control-btn skip" id="skip-forward-btn"><span id="skip-forward-text">5s</span> ‚Ü™</button>
            </div>

            <button class="btn btn-secondary" id="skip-intro-btn"
              style="width: 100%; background: linear-gradient(135deg, #7B1FA2, #4A148C);">‚è© Skip
              Intro (<span id="skip-intro-text">90s</span>)</button>

            <div class="seek-control">
              <input type="number" id="seek-time" placeholder="Seconds" min="0" style="width: 80px;">
              <button class="btn btn-primary" id="seek-btn" style="flex: 1;">Seek</button>
            </div>

            <!-- Speed Control -->
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; position: relative;">
              <button class="control-btn speed" id="speed-down-btn">-</button>
              <div
                style="display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border-radius: 10px;">
                <div style="font-size: 11px; color: #888;">Speed</div>
                <div id="speed-display" style="font-weight: bold; color: #fff;">1.0x</div>
              </div>
              <button class="control-btn speed" id="speed-up-btn">+</button>

              <!-- Overlay Label -->
              <div
                style="position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; pointer-events: none;">
                <span
                  style="background: rgba(0,0,0,0.6); color: #ff9800; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; border-radius: 10px; font-size: 12px; font-weight: bold; border: 1px solid #ff9800;">Under
                  Construction</span>
              </div>
            </div>

            <button class="btn btn-secondary" id="get-time-btn" style="width: 100%;">‚è±Ô∏è Get Current
              Time</button>
            <div id="current-time-display"
              style="text-align: center; margin-top: 8px; font-size: 14px; color: #2196F3; font-family: monospace;">
            </div>

            <button class="btn btn-danger" id="kill-playlist-btn"
              style="width: 100%; margin-top: auto; background: #c62828; color: rgba(255,255,255,0.7); border: none; padding: 12px; font-weight: 500;">Kill
              Playlist</button>
          </div>

          <!-- Bottom: Other Stuff (Track Selection, BSL, Relaunch) -->
          <div class="panel glass-strong remote-bottom-panel" style="padding: 15px;">
            <div style="display: flex; gap: 30px; align-items: center; flex-wrap: wrap;">
              <!-- Track Selection -->
              <div style="display: flex; align-items: center; gap: 10px;">
                <label style="color: #888; font-size: 13px;">Audio:</label>
                <select id="remote-audio-track" disabled
                  style="padding: 8px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #e0e0e0; min-width: 150px;">
                  <option>No tracks available</option>
                </select>
              </div>

              <div style="display: flex; align-items: center; gap: 10px;">
                <label style="color: #888; font-size: 13px;">Subtitles:</label>
                <select id="remote-subtitle-track" disabled
                  style="padding: 8px 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 6px; color: #e0e0e0; min-width: 150px;">
                  <option>No tracks available</option>
                </select>
              </div>

              <!-- Status message bubble between track selection and buttons -->
              <div class="status-message" id="status-message" style="flex: 1; margin: 0; padding: 8px 16px;"></div>

              <div style="margin-left: auto; display: flex; gap: 10px;">
                <button class="btn btn-secondary" id="remote-bsl-btn">üîÑ BSL-S¬≤</button>
                <button class="btn btn-primary" id="relaunch-btn">üöÄ Relaunch</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- FFmpeg Tools View -->
      <div id="ffmpeg-view" class="view">
        <h2 class="view-title">FFmpeg Tools</h2>

        <!-- Password Overlay -->
        <div id="ffmpeg-auth-overlay" class="glass" style="padding: 40px; text-align: center; margin-top: 20px;">
          <h3>üîê Design & Processing Tools</h3>
          <p style="color: #ccc; margin-bottom: 20px;">This section is protected. Please enter the password to access.
          </p>
          <input type="password" id="ffmpeg-password-input" class="password-input" placeholder="ACCESS PASSWORD"
            onkeypress="if(event.key === 'Enter') authenticateFfmpeg()">
          <button class="ffmpeg-btn" onclick="authenticateFfmpeg()"
            style="width: 100%; justify-content: center; padding: 12px; font-size: 14px; margin-top: 10px;">üîì Unlock
            Tools</button>
        </div>

        <!-- Main Content (Hidden until auth) -->
        <div id="ffmpeg-content" style="display: none;">

          <!-- Encoders Badge -->
          <div style="margin-bottom: 20px;">
            <span style="color: #888; font-size: 12px; margin-right: 10px;">DETECTED ENCODERS:</span>
            <div id="encoder-list" style="display: inline-block;">
              <span class="encoder-badge">Scanning...</span>
            </div>
          </div>

          <!-- Main Grid Layout -->
          <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px; align-items: start;">

            <!-- Left Column: Tools -->
            <div style="display: flex; flex-direction: column; gap: 20px;">

              <!-- Remux Section -->
              <div class="ffmpeg-section" style="margin-bottom: 0;">
                <div class="ffmpeg-header">
                  <h3>üì¶ Remux (Fast, No Re-encode)</h3>
                </div>
                <div class="ffmpeg-controls">
                  <div>
                    <select id="remux-file-input" class="dropdown" style="width: 100%; margin-bottom: 10px;">
                      <option value="">Select source file...</option>
                    </select>
                    <div style="display: flex; gap: 10px;">
                      <select id="remux-preset" class="dropdown" style="flex: 1;">
                        <option value="mp4_fast">Clean Remux to MP4 (FastStart)</option>
                        <option value="mkv_copy">Remux to MKV (Copy Streams)</option>
                        <option value="header_fix">Fix Headers (Ignore Errors)</option>
                      </select>
                    </div>
                  </div>
                  <button class="ffmpeg-btn" onclick="runFfmpegPreset('remux')">‚ñ∂ Start Remux</button>
                </div>
              </div>

              <!-- Re-encode Section -->
              <div class="ffmpeg-section" style="margin-bottom: 0;">
                <div class="ffmpeg-header">
                  <h3>‚ö†Ô∏è Re-encode (CPU/GPU Intensive)</h3>
                </div>
                <!-- Warning moved inside standard flow or kept if preferred -->
                <div class="ffmpeg-warning" style="margin-bottom: 15px;">
                  ‚ö†Ô∏è <b>Warning:</b> This operation WILL put heavy load on the server.
                </div>
                <div class="ffmpeg-controls">
                  <div>
                    <select id="reencode-file-input" class="dropdown" style="width: 100%; margin-bottom: 10px;">
                      <option value="">Select source file...</option>
                    </select>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                      <select id="reencode-encoder" class="dropdown" style="flex: 1;">
                        <option value="auto">Auto-Detect Encoder</option>
                        <option value="libx264">CPU (x264)</option>
                        <!-- HW options injected by JS -->
                      </select>
                      <select id="reencode-quality" class="dropdown" style="flex: 1;">
                        <option value="high">High Quality</option>
                        <option value="medium" selected>Medium Quality</option>
                        <option value="low">Low Quality</option>
                      </select>
                    </div>
                    <select id="reencode-resolution" class="dropdown" style="width: 100%;">
                      <option value="original">Original Resolution</option>
                      <option value="1080">1080p</option>
                      <option value="720">720p</option>
                      <option value="480">480p</option>
                    </select>
                  </div>
                  <button class="ffmpeg-btn danger" onclick="runFfmpegPreset('reencode')">‚ñ∂ Start Re-encode</button>
                </div>
              </div>

              <!-- Extract Section -->
              <div class="ffmpeg-section" style="margin-bottom: 0;">
                <div class="ffmpeg-header">
                  <h3>üéµ Extract Tracks</h3>
                </div>
                <div class="ffmpeg-controls">
                  <div>
                    <select id="extract-file-input" class="dropdown" data-drop-up="true"
                      style="width: 100%; margin-bottom: 10px;">
                      <option value="">Select source file...</option>
                    </select>
                    <div style="display: flex; gap: 10px;">
                      <select id="extract-type" class="dropdown" data-drop-up="true" style="flex: 1;">
                        <option value="audio">Audio Tracks</option>
                        <option value="subtitle">Subtitle Tracks</option>
                      </select>
                      <select id="extract-format" class="dropdown" data-drop-up="true" style="flex: 1;">
                        <option value="aac">AAC (Audio)</option>
                        <option value="mp3">MP3 (Audio)</option>
                        <option value="webvtt">WebVTT (Subtitle)</option>
                        <option value="ass">ASS (Subtitle)</option>
                      </select>
                    </div>
                  </div>
                  <button class="ffmpeg-btn" onclick="runFfmpegPreset('extract')">‚ñ∂ Extract</button>
                </div>
              </div>

              <!-- Track Tools Section -->
              <div class="ffmpeg-section" style="margin-bottom: 0;">
                <div class="ffmpeg-header">
                  <h3>üîó Track Tools</h3>
                </div>
                <div class="ffmpeg-controls subtitle-tools">
                  <select id="subtool-source-input" class="dropdown" data-drop-up="true"
                    style="width: 100%; margin-bottom: 10px;">
                    <option value="" data-hint="(has tracks)">Select source video...</option>
                  </select>

                  <select id="subtool-track-input" class="dropdown" data-drop-up="true"
                    style="width: 100%; margin-bottom: 10px;" disabled>
                    <option value="">Select a track...</option>
                  </select>

                  <select id="subtool-target-input" class="dropdown" data-drop-up="true"
                    style="width: 100%; margin-bottom: 10px;">
                    <option value="">Select target video to assign track to...</option>
                  </select>

                  <div style="display: flex; gap: 10px;" id="subtool-actions-standard">
                    <button class="ffmpeg-btn" onclick="runSubtitleTool('rebind')"
                      style="flex: 1; justify-content: center;" title="Move track from Source to Target (Rename)">
                      Rebind (Move)
                    </button>
                    <button class="ffmpeg-btn" onclick="runSubtitleTool('share')"
                      style="flex: 1; justify-content: center;" title="Add track to Target (Keep on Source)">
                      Share (Link)
                    </button>
                  </div>

                  <div style="display: none;" id="subtool-actions-orphan">
                    <button class="ffmpeg-btn" onclick="runSubtitleTool('bind-orphan')"
                      style="flex: 1; justify-content: center; width: 100%; background: #28a745;"
                      title="Bind orphan track to video">
                      Bind Orphan to Video
                    </button>
                  </div>
                </div>
              </div>

            </div>

            <!-- Right Column: Queue -->
            <div class="ffmpeg-section"
              style="margin-bottom: 0; align-self: stretch; display: flex; flex-direction: column;">
              <div class="ffmpeg-header">
                <h3>üìã Job Queue</h3>
                <button class="text-btn" style="font-size: 12px;" onclick="refreshFfmpegJobs()">Refresh</button>
              </div>
              <div id="ffmpeg-queue" class="job-queue" style="flex: 1; max-height: none; min-height: 400px;">
                <div style="text-align: center; color: #888; padding: 20px;">No active jobs</div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </main>

    <!-- BSL-S¬≤ Modal -->
    <div id="bsl-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>üîÑ BSL-S¬≤ Client Status</h2>
          <button class="modal-close" id="bsl-modal-close">‚úï Close</button>
        </div>
        <div id="bsl-modal-body">
          <div class="empty-message">Waiting for clients to select their local folders...</div>
        </div>
      </div>
    </div>

    <!-- Clients Modal -->
    <div id="clients-modal" class="modal">
      <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header">
          <h2>üë• Connected Clients</h2>
          <button class="modal-close" id="clients-modal-close">‚úï Close</button>
        </div>
        <div id="clients-modal-body">
          <div class="empty-message">Loading clients...</div>
        </div>
      </div>
    </div>

    <!-- External Content Modal -->
    <div id="external-modal" class="modal">
      <div class="modal-content" style="max-width: 550px;">
        <div class="modal-header">
          <h2>üåê Add External Content</h2>
          <button class="modal-close" id="external-modal-close">‚úï Close</button>
        </div>
        <div id="external-modal-body">
          <input type="text" id="external-url-input" class="youtube-input" placeholder="Paste URL here...">
          <div id="external-error" class="youtube-error"></div>
          <div id="external-preview" class="youtube-preview">
            <img id="external-thumb" alt="Content thumbnail">
            <div class="youtube-preview-info">
              <p class="youtube-preview-title" id="external-title"></p>
              <p class="youtube-preview-channel" id="external-platform"></p>
            </div>
          </div>
          <button class="btn btn-primary" id="external-add-btn" style="width: 100%;" disabled>+ Add to Playlist</button>

          <div
            style="margin-top: 15px; padding: 12px; background: rgba(255,255,255,0.03); border-radius: 8px; font-size: 12px;">
            <p style="color: #888; margin-bottom: 8px;"><strong>Supported Platforms:</strong></p>
            <div style="display: flex; flex-wrap: wrap; gap: 6px;">
              <span class="badge badge-youtube">YouTube</span>
              <span class="badge badge-vimeo">Vimeo</span>
              <span class="badge badge-dailymotion">Dailymotion</span>
              <span class="badge badge-twitch">Twitch</span>
              <span class="badge badge-soundcloud">SoundCloud</span>
              <span class="badge badge-streamable">Streamable</span>
              <span class="badge badge-gdrive">Google Drive</span>
              <span class="badge badge-kick">Kick</span>
              <span class="badge badge-url">Direct URL</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div> <!-- Close admin-ui -->

  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/admin.js"></script>
</body>

</html>